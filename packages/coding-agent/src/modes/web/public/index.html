<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<title>pi --mode web</title>
		<link rel="stylesheet" href="/vendor/xterm.css" />
		<style>
			:root {
				--bg: #0a0f1a;
				--panel: #111827;
				--line: #273245;
				--text: #e5e7eb;
				--muted: #93a0b7;
				--good: #34d399;
				--bad: #f87171;
				--app-height: 100vh;
			}
			* {
				box-sizing: border-box;
				min-width: 0;
			}
			html,
			body {
				width: 100%;
				height: 100%;
				margin: 0;
				overflow: hidden;
				overscroll-behavior: none;
			}
			body {
				background: radial-gradient(1200px 700px at 10% -10%, #1e3a8a33 0%, var(--bg) 45%);
				color: var(--text);
				font-family:
					"Iosevka Web",
					"JetBrains Mono",
					"SFMono-Regular",
					Menlo,
					monospace;
				-webkit-text-size-adjust: 100%;
			}
			main {
				width: 100%;
				max-width: 100vw;
				height: var(--app-height);
				padding: max(6px, env(safe-area-inset-top)) max(8px, env(safe-area-inset-right))
					calc(8px + env(safe-area-inset-bottom)) max(8px, env(safe-area-inset-left));
				display: grid;
				grid-template-rows: 1fr auto;
				gap: 8px;
			}
			button {
				background: #1d2638;
				color: var(--text);
				border: 1px solid var(--line);
				border-radius: 8px;
				padding: 6px 9px;
				font: inherit;
				cursor: pointer;
			}
			#terminal-wrapper {
				background: #05070d;
				border: 1px solid var(--line);
				border-radius: 12px;
				overflow: hidden;
				min-height: 0;
				padding: 6px;
				min-width: 0;
			}
			#terminal {
				width: 100%;
				height: 100%;
				min-height: 0;
				min-width: 0;
			}
			#terminal .xterm {
				height: 100%;
			}
			#terminal .xterm-viewport {
				-webkit-overflow-scrolling: touch;
			}
			.detail {
				color: var(--muted);
				min-width: 0;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
			}
			.mobile-keybar {
				display: none;
				border: 1px solid var(--line);
				border-radius: 10px;
				padding: 6px;
				background: color-mix(in srgb, var(--panel) 92%, transparent);
				gap: 6px;
			}
			.mobile-keybar-row {
				display: grid;
				grid-template-columns: repeat(3, minmax(0, 1fr));
				gap: 6px;
			}
			.mobile-keybar button {
				min-height: 34px;
				padding: 6px 4px;
				font-size: 12px;
				border-radius: 7px;
				background: #152036;
			}
			.mobile-keybar .icon-button {
				font-size: 16px;
				font-weight: 700;
				padding-top: 2px;
			}
			.mobile-status {
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.connection-dot {
				width: 11px;
				height: 11px;
				border-radius: 999px;
				background: var(--bad);
				box-shadow: 0 0 0 1px #00000066;
			}
			.connection-dot.connected {
				background: var(--good);
			}
			body.mobile-ui-enabled .mobile-keybar {
				display: grid;
			}
			@media (max-width: 900px) {
				main {
					gap: 6px;
				}
				#terminal-wrapper {
					padding: 4px;
				}
			}
		</style>
	</head>
	<body>
		<main>
			<section id="terminal-wrapper">
				<div id="terminal"></div>
			</section>
			<section id="mobile-keybar" class="mobile-keybar" aria-label="Mobile terminal controls" aria-hidden="true">
				<div class="mobile-keybar-row">
					<button type="button" data-key="esc">Esc</button>
					<button type="button" data-key="up">Up</button>
					<button type="button" data-key="down">Down</button>
				</div>
				<div class="mobile-keybar-row">
					<button id="reconnect" class="icon-button" type="button" title="Reconnect" aria-label="Reconnect">â†»</button>
					<div class="mobile-status">
						<span id="connection-dot" class="connection-dot" aria-label="Disconnected"></span>
					</div>
					<button type="button" data-key="enter">Enter</button>
				</div>
			</section>
		</main>

		<script src="/vendor/xterm.js"></script>
		<script src="/vendor/xterm-addon-fit.js"></script>
		<script>
			window.__PI_WEB_BOOTSTRAP__ = __PI_WEB_BOOTSTRAP_JSON__;
		</script>
		<script type="module" src="/app.js"></script>
	</body>
</html>
