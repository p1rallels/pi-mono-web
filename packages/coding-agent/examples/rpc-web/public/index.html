<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>pi RPC Web Example</title>
		<style>
			:root {
				--bg: #06090f;
				--panel: #0b0f1a;
				--panel-2: #111827;
				--text: #e6edf3;
				--muted: #98a4b8;
				--green: #3ddc84;
				--yellow: #f4bf4f;
				--blue: #4da3ff;
				--magenta: #c17dff;
				--red: #ff6b6b;
				--border: #283346;
				--line: rgba(255, 255, 255, 0.05);
			}
			* {
				box-sizing: border-box;
			}
			body {
				margin: 0;
				font-family:
					"Iosevka Web",
					"JetBrains Mono",
					"SFMono-Regular",
					Menlo,
					monospace;
				background:
					radial-gradient(1200px 540px at 12% -12%, rgba(38, 94, 220, 0.28) 0%, transparent 54%),
					radial-gradient(900px 500px at 90% 8%, rgba(48, 136, 112, 0.22) 0%, transparent 52%),
					var(--bg);
				color: var(--text);
			}
			main {
				max-width: 1360px;
				margin: 0 auto;
				padding: 16px;
				display: grid;
				grid-template-columns: 330px 1fr;
				gap: 12px;
			}
			@media (max-width: 980px) {
				main {
					grid-template-columns: 1fr;
				}
			}
			.panel {
				background: color-mix(in srgb, var(--panel) 88%, transparent);
				border: 1px solid var(--border);
				border-radius: 10px;
				padding: 12px;
				box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
			}
			h1,
			h2 {
				margin: 0 0 12px 0;
				font-size: 14px;
				letter-spacing: 0.2px;
			}
			h1 {
				font-size: 18px;
				margin-bottom: 2px;
			}
			.subtle {
				color: var(--muted);
				margin: 0 0 14px 0;
				font-size: 12px;
			}
			label {
				font-size: 12px;
				color: var(--muted);
				display: block;
				margin-bottom: 5px;
			}
			input,
			textarea,
			button {
				width: 100%;
				font: inherit;
				border-radius: 8px;
				border: 1px solid var(--border);
			}
			input,
			textarea {
				padding: 8px 10px;
				background: var(--panel-2);
				color: var(--text);
				margin-bottom: 8px;
			}
			textarea {
				min-height: 80px;
				resize: vertical;
			}
			button {
				padding: 8px 10px;
				background: #142033;
				color: var(--text);
				cursor: pointer;
			}
			button.primary {
				background: #102c1f;
				border-color: #1f6a49;
			}
			button.warn {
				background: #4a1e1d;
				border-color: #a53e3b;
			}
			button:disabled {
				opacity: 0.45;
				cursor: not-allowed;
			}
			.row {
				display: flex;
				gap: 8px;
			}
			.row > button {
				flex: 1;
			}
			.status {
				padding: 6px 8px;
				border-radius: 8px;
				background: #0e1522;
				border: 1px solid var(--border);
				margin-bottom: 8px;
				font-size: 12px;
			}
			.log,
			.assistant,
			.widget-block,
			.status-block {
				background: #04070f;
				border: 1px solid var(--border);
				border-radius: 10px;
				padding: 10px;
				white-space: pre-wrap;
				font-size: 12px;
				line-height: 1.35;
			}
			.log {
				max-height: 480px;
				overflow: auto;
			}
			.widget-block {
				margin-bottom: 10px;
			}
			.assistant {
				min-height: 120px;
				max-height: 420px;
				overflow: auto;
				font-size: 13px;
			}
			.terminal-line {
				white-space: pre-wrap;
				word-break: break-word;
			}
			.dim {
				color: var(--muted);
			}
			.blue {
				color: var(--blue);
			}
			.green {
				color: var(--green);
			}
			.magenta {
				color: var(--magenta);
			}
			.yellow {
				color: var(--yellow);
			}
			.red {
				color: var(--red);
			}
			.bad {
				color: var(--red);
			}
			.good {
				color: var(--green);
			}
			.grid-2 {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 10px;
			}
			@media (max-width: 1180px) {
				.grid-2 {
					grid-template-columns: 1fr;
				}
			}
			.divider {
				border: 0;
				border-top: 1px solid var(--line);
				margin: 10px 0;
			}
		</style>
	</head>
	<body>
		<main>
			<section class="panel">
				<h1>pi RPC Web</h1>
				<p class="subtle">Browser-hosted client for <code>pi --mode rpc</code>.</p>

				<div class="status" id="status-line">Session: <span class="bad">stopped</span></div>

				<label for="provider">Provider</label>
				<input id="provider" value="openrouter" />

				<label for="model">Model</label>
				<input id="model" value="z-ai/glm-4.7" />

				<label for="cwd">Working Directory (optional)</label>
				<input id="cwd" placeholder="/path/to/repo" />

				<div class="row">
					<button class="primary" id="start-session">Start Session</button>
					<button class="warn" id="stop-session">Stop Session</button>
				</div>

				<hr class="divider" />

				<label for="prompt">Prompt</label>
				<textarea id="prompt" placeholder="Ask pi to do something..."></textarea>

				<div class="row">
					<button class="primary" id="send-prompt">Send Prompt</button>
					<button class="warn" id="abort-prompt">Abort</button>
				</div>

				<div class="row" style="margin-top: 8px">
					<button id="run-rpc-input">/rpc-input</button>
					<button id="run-rpc-editor">/rpc-editor</button>
					<button id="run-rpc-prefill">/rpc-prefill</button>
				</div>
			</section>

			<section class="panel">
				<div class="grid-2">
					<div>
						<h2>Assistant Stream</h2>
						<div class="assistant" id="assistant-stream"></div>
					</div>
					<div>
						<h2>Terminal Feed</h2>
						<div class="log" id="terminal-feed"></div>
					</div>
				</div>

				<h2 style="margin-top: 12px">Extension Status</h2>
				<div class="status-block" id="extension-status"></div>

				<h2 style="margin-top: 12px">Widgets</h2>
				<div id="widgets"></div>

				<h2 style="margin-top: 12px">Event Log</h2>
				<div class="log" id="log"></div>
			</section>
		</main>
		<script type="module" src="/app.js"></script>
	</body>
</html>
